<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Referral — Meadow Pathways Wellbeing and Education Cornwall</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <header class="site-header">
    <div class="header-inner container">
      <div class="logo-wrap"><a href="index.html"><img src="Logo.png" alt="Meadow Pathways Logo" class="logo" /></a></div>
      <nav aria-label="Primary" class="primary-nav"><button id="navToggle" class="nav-toggle" aria-expanded="false">☰</button>
        <ul id="primaryNav" class="nav-tabs"><li><a href="index.html">Home</a></li><li><a href="about.html">About</a></li><li><a href="eotas.html">EOTAS</a></li><li><a href="safeguarding.html">Safeguarding</a></li><li><a href="staff.html">Staff</a></li><li><a href="referral.html" class="active">Referral</a></li><li><a href="contact.html">Contact</a></li></ul>
      </nav>
    </div>
  </header>

  <div class="page-wrap">
    <section class="hero" aria-labelledby="hero-title" style="background-image:url('BG.png');">
      <div class="hero-overlay container">
        <h1 id="hero-title">Referral</h1>
        <p class="hero-sub">Guiding Individual Journeys with Care and Purpose</p>
      </div>
    </section>

    <main id="main" class="container">
      <section class="card">
        <h2>Referral form</h2>
        <p>Use this form to refer a child or young person to Meadow Pathways. We will respond to referrals promptly and sensitively.</p>

        <form id="referralForm" method="POST" novalidate>
          <input type="hidden" name="_subject" value="New referral from website" />
          <fieldset>
            <legend>Referrer details</legend>
            <label for="referrer-name">Your name</label>
            <input id="referrer-name" name="referrer_name" type="text" required />
            <label for="referrer-email">Your email</label>
            <input id="referrer-email" name="referrer_email" type="email" required />
            <label for="referrer-phone">Your telephone</label>
            <input id="referrer-phone" name="referrer_phone" type="tel" />
            <label for="relationship">Your relationship to the child</label>
            <input id="relationship" name="relationship" type="text" />
          </fieldset>

          <fieldset>
            <legend>Child / Young person</legend>
            <label for="child-name">Name</label>
            <input id="child-name" name="child_name" type="text" required />
            <label for="dob">Date of birth</label>
            <input id="dob" name="dob" type="date" />
            <label for="gender">Gender</label>
            <input id="gender" name="gender" type="text" />
            <label for="school">School / setting</label>
            <input id="school" name="school" type="text" />
            <label for="ethnicity">Ethnicity (optional)</label>
            <input id="ethnicity" name="ethnicity" type="text" />
          </fieldset>

          <fieldset>
            <legend>Needs and background</legend>
            <label for="presenting">Presenting concerns / reason for referral</label>
            <textarea id="presenting" name="presenting_concerns" rows="5" required></textarea>
            <label for="additional">Additional helpful information (SEN, health, family context)</label>
            <textarea id="additional" name="additional_info" rows="4"></textarea>
            <label for="risk">Is there any known risk (safeguarding, medical, behaviour)? Please describe</label>
            <textarea id="risk" name="known_risk" rows="3"></textarea>
            <label for="consent">Consent status</label>
            <select id="consent" name="consent_status" required>
              <option value="">Select</option>
              <option value="consent_given">Consent given by parent/carer</option>
              <option value="consent_not_given">Consent not given</option>
              <option value="consent_pending">Consent pending</option>
            </select>
          </fieldset>

          <fieldset>
            <legend>Logistics</legend>
            <label for="preferred">Preferred contact method</label>
            <select id="preferred" name="preferred_contact"><option value="email">Email</option><option value="phone">Phone</option></select>
            <label for="urgent">Is this urgent?</label>
            <select id="urgent" name="is_urgent"><option value="no">No</option><option value="yes">Yes</option></select>
          </fieldset>

          <p>By submitting this form you confirm you have appropriate consent to share information. Meadow Pathways will contact you regarding next steps.</p>

          <button type="submit">Submit referral</button>
          <div id="referralStatus" role="status" aria-live="polite" style="margin-top:12px;"></div>
        </form>
      </section>
    </main>
  </div>

  <button id="backToTop" class="back-to-top" aria-label="Back to top" type="button">↑</button>

  <footer class="site-footer"><div class="container"><p>&copy; Meadow Pathways Cornwall</p></div></footer>

  <script>
    (function () {
      const form = document.getElementById('referralForm');
      const statusEl = document.getElementById('referralStatus');
      const FORMSPREE = 'https://formspree.io/f/movnvzqp';

      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        statusEl.textContent = 'Submitting...';
        const data = new FormData(form);
        try {
          const res = await fetch(FORMSPREE, { method: 'POST', headers: { 'Accept': 'application/json' }, body: data });
          if (res.ok) {
            form.reset();
            statusEl.textContent = 'Thank you — your referral has been sent.';
            setTimeout(() => { window.location.href = 'thankyou.html'; }, 900);
          } else {
            const result = await res.json();
            statusEl.textContent = (result && result.errors) ? result.errors.map(err => err.message).join('; ') : 'There was a problem submitting the form. Please try again later.';
          }
        } catch (err) {
          statusEl.textContent = 'Network error — please check your connection and try again.';
        }
      });
    })();
  </script>

  <script src="script.js"></script>
</body>
</html>
