<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Staff â€” Meadow Pathways</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="bootstrap.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <div class="site-wrapper">
    <aside class="sidebar">
      <div class="sidebar-top">
        <img src="Logo.png" alt="Meadow Pathways logo" class="logo-small">
        <h1 class="brand">Meadow Pathways</h1>
        <p class="tag">Staff Resources</p>
      </div>
    </aside>

    <main id="main" class="main-content">
      <section id="locked">
        <h1>ğŸ”’ Staff Access</h1>
        <p>This area is for Meadow Pathways staff only. Enter the password to continue.</p>
        <input type=MPWEC2025! id="staffPassword" placeholder="Enter password" />
        <button id="unlockBtn" class="pill">Unlock</button>
      </section>

      <section id="staffPanel" style="display:none;">
        <h2>Welcome to the Staff Page</h2>
        <p>This page contains protected resources and internal links for staff use only.</p>

        <ul>
          <li>Formspree endpoint: <code>https://formspree.io/f/movnvzqp</code></li>
          <li>General email: <a href="mailto:meadowpathwayscornwall@outlook.com">meadowpathwayscornwall@outlook.com</a></li>
          <li>SharePoint: <a href="#" target="_blank">Open Meadow Pathways SharePoint</a></li>
        </ul>

        <h3>ğŸ“„ Policy Documents</h3>
        <div class="policy-links">
          <a class="pill" href="MPWEC Curriculum Policy EOTAS September 2025.docx" download>Curriculum Policy</a>
          <a class="pill" href="MPWEC H&S Policy Sep 25.docx" download>Health &amp; Safety</a>
          <a class="pill" href="MPWEC Lone Working Policy Sep25.docx" download>Lone Working</a>
          <a class="pill" href="MPWEC Safeguarding and Child Protection Policy Sep 2025.docx" download>Safeguarding</a>
        </div>

        <h3>ğŸ•“ Log Hours</h3>
        <form id="hoursForm" method="POST" action="https://formspree.io/f/movnvzqp">
          <label>Name</label><input type="text" name="staff_name" required>
          <label>Date</label><input type="date" name="date_worked" required>
          <label>Duration (hours)</label><input type="number" name="duration_hours" step="0.25" required>
          <label>Notes</label><textarea name="notes"></textarea>
          <button type="submit" class="pill">Submit Hours</button>
        </form>
        <div id="hoursStatus"></div>
      </section>
    </main>
  </div>

  <script>
    const PASSWORD = 'MPWEC!';
    const lockedEl = document.getElementById('locked');
    const staffPanel = document.getElementById('staffPanel');
    const unlockBtn = document.getElementById('unlockBtn');
    const pwdInput = document.getElementById('staffPassword');

    function unlock() {
      if (pwdInput.value.trim() === PASSWORD) {
        lockedEl.style.display = 'none';
        staffPanel.style.display = 'block';
      } else {
        alert('Incorrect password â€” contact Michelle or Zoe for access.');
        pwdInput.value = '';
      }
    }
    unlockBtn.addEventListener('click', unlock);
    pwdInput.addEventListener('keyup', e => { if (e.key === 'Enter') unlock(); });

    // Hours form submission
    const hoursForm = document.getElementById('hoursForm');
    const hoursStatus = document.getElementById('hoursStatus');
    hoursForm.addEventListener('submit', async e => {
      e.preventDefault();
      hoursStatus.textContent = 'Submitting...';
      const res = await fetch(hoursForm.action, { method: 'POST', body: new FormData(hoursForm) });
      hoursStatus.textContent = res.ok ? 'âœ… Submitted. Thank you!' : 'âŒ Error submitting form.';
      if (res.ok) hoursForm.reset();
    });
  </script>
</body>
</html>
