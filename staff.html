<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff Only â€” Meadow Pathways</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <img src="Logo.png" alt="Meadow Pathways Logo" class="sidebar-logo">
    <nav class="side-nav" aria-label="Primary site navigation">
  <ul class="nav-tabs" role="menubar">
    <li><a href="index.html" class="nav-tab home">ğŸ  Home</a></li>
    <li><a href="eotas.html" class="nav-tab eotas">ğŸ” EOTAS</a></li>
    <li><a href="about.html" class="nav-tab about">â„¹ï¸ About Us</a></li>
    <li><a href="policies.html" class="nav-tab policies">ğŸ“˜ Policies</a></li>
    <li><a href="referral.html" class="nav-tab referral">ğŸ“ Referral</a></li>
    <li><a href="contact.html" class="nav-tab contact">â˜ï¸ Contact</a></li>
    <li><a href="staff.html" class="nav-tab staff" aria-current="page">ğŸ‘©â€ğŸ« Staff Only</a></li>
    <li><a href="treverno.html" class="nav-tab treverno">ğŸ¡ Treverno Meadows</a></li>
    <li><a href="safeguarding.html" class="nav-tab safeguarding">ğŸ›¡ Safeguarding</a></li>
    <li><a href="protected-resources.html" class="nav-tab resources">ğŸ” Resources</a></li>
    <li><a href="staff-rota.html" class="nav-tab rota">ğŸ“… Rota</a></li>
    <li><a href="staff-expenses.html" class="nav-tab expenses">ğŸ’° Expenses</a></li>
  </ul>
</nav>

  </aside>

  <!-- Main Content -->
  <main class="main-content">

    <div class="wrap">
      <h1>Welcome to the Staff Page</h1>
      <p>This page contains protected resources and notes for staff use only. Please do not share externally.</p>

      <!-- Password Lock -->
      <div id="locked">
        <label for="staffPassword">Enter Password to Access:</label>
        <input type="password" id="staffPassword" placeholder="Password">
        <button id="unlockBtn">Unlock</button>
      </div>

      <div id="staffPanel" style="display:none;">
        
        <h2>Staff Resources & Links</h2>
        <ul>
          <li>General contact email: <a href="mailto:meadowpathwayscornwall@outlook.com">meadowpathwayscornwall@outlook.com</a></li>
          <li>Michelleâ€™s email: <a href="mailto:Michelle.Pascoe@meadowpathwayscornwall.com">Michelle.Pascoe@meadowpathwayscornwall.com</a></li>
          <li>Zoeâ€™s email: <a href="mailto:Zoe.Waitz@meadowpathwayscornwall.com">Zoe.Waitz@meadowpathwayscornwall.com</a></li>
        </ul>

        <h3>SharePoint & Calendar</h3>
        <ul>
          <li><a href="https://meadowpathwayscornwall.sharepoint.com/:u:/s/meadowpathways/IQAQhQyq-4EBS7K7Y-Fwsk3HAQJUqP7ZOgT9Wuy9FFBZyYM?e=J4dkgU" target="_blank" rel="noopener">SharePoint â€“ Risk Assessments, Policies etc.</a></li>
          <li><a href="https://outlook.office.com/calendar/view/month" target="_blank" rel="noopener">Meadow Pathways Staff Calendar</a></li>
        </ul>

        <h3>Hours Log</h3>
        <form name="hours" method="POST" data-netlify="true" id="hoursForm">
          <input type="hidden" name="form-name" value="hours">
          <!-- Honeypot for spam -->
          <p class="hidden"><label>Donâ€™t fill this out: <input name="bot-field"></label></p>

          <label for="staff-name">Staff member name</label>
          <input id="staff-name" name="staff_name" type="text" required>

          <label for="date-worked">Date</label>
          <input id="date-worked" name="date_worked" type="date" required>

          <label for="duration">Duration (hours)</label>
          <input id="duration" name="duration_hours" type="number" step="0.25" min="0" required>

          <label for="client">Client / session with</label>
          <input id="client" name="client_name" type="text">

          <label for="notes">Brief notes</label>
          <textarea id="notes" name="notes" rows="4"></textarea>

          <label for="email-staff">Staff email</label>
          <input id="email-staff" name="staff_email" type="email" required>

          <button type="submit">Submit Hours</button>
          <div id="hoursStatus" role="status" aria-live="polite" style="margin-top:12px;color:var(--text-soft);font-weight:600"></div>
        </form>

        <h3>Expenses Log</h3>
        <form name="expenses" method="POST" data-netlify="true" id="expensesForm">
          <input type="hidden" name="form-name" value="expenses">
          <!-- Honeypot for spam -->
          <p class="hidden"><label>Donâ€™t fill this out: <input name="bot-field"></label></p>

          <label for="staff-name-exp">Staff member name</label>
          <input id="staff-name-exp" name="staff_name" type="text" required>

          <label for="date-exp">Date</label>
          <input id="date-exp" name="date_exp" type="date" required>

          <label for="amount">Amount (Â£)</label>
          <input id="amount" name="amount" type="number" step="0.01" min="0" required>

          <label for="reason">Reason / Details</label>
          <textarea id="reason" name="reason" rows="4" required></textarea>

          <button type="submit">Submit Expenses</button>
          <div id="expensesStatus" role="status" aria-live="polite" style="margin-top:12px;color:var(--text-soft);font-weight:600"></div>
        </form>

      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <p>Meadow Pathways Wellbeing & Education Cornwall Ltd Â© 2025</p>
    <p>Michelle: 07932 243358 | Zoe: 07775 733587</p>
  </footer>

  <script>
    // Password protection
    const PASSWORD = 'MPWEC!';
    const lockedEl = document.getElementById('locked');
    const staffPanel = document.getElementById('staffPanel');
    const unlockBtn = document.getElementById('unlockBtn');
    const pwdInput = document.getElementById('staffPassword');

    function unlock() {
      const val = (pwdInput.value || '').trim();
      if (val === PASSWORD) {
        lockedEl.style.display = 'none';
        staffPanel.style.display = 'block';
        lockedEl.setAttribute('aria-hidden', 'true');
        staffPanel.setAttribute('aria-hidden', 'false');
        document.getElementById('staff-name').focus();
      } else {
        pwdInput.value = '';
        pwdInput.focus();
        alert('Incorrect password. If you need access, please contact Michelle or Zoe.');
      }
    }
    unlockBtn.addEventListener('click', unlock);
    pwdInput.addEventListener('keyup', function (e) { if (e.key === 'Enter') unlock(); });

    // Hours form submission
    const hoursForm = document.getElementById('hoursForm');
    const hoursStatus = document.getElementById('hoursStatus');
    hoursForm.addEventListener('submit', async function(e){
      e.preventDefault();
      hoursStatus.textContent = 'Submitting...';
      const data = new FormData(hoursForm);
      try {
        const res = await fetch('/', { method:'POST', body:data });
        if(res.ok){
          hoursForm.reset();
          hoursStatus.textContent = 'Hours submitted. Thank you.';
        } else {
          hoursStatus.textContent = 'Submission error â€” please try again later.';
        }
      } catch(err){
        hoursStatus.textContent = 'Network error â€” check connection and try again.';
      }
    });

    // Expenses form submission
    const expensesForm = document.getElementById('expensesForm');
    const expensesStatus = document.getElementById('expensesStatus');
    expensesForm.addEventListener('submit', async function(e){
      e.preventDefault();
      expensesStatus.textContent = 'Submitting...';
      const data = new FormData(expensesForm);
      try {
        const res = await fetch('/', { method:'POST', body:data });
        if(res.ok){
          expensesForm.reset();
          expensesStatus.textContent = 'Expenses submitted. Thank you.';
        } else {
          expensesStatus.textContent = 'Submission error â€” please try again later.';
        }
      } catch(err){
        expensesStatus.textContent = 'Network error â€” check connection and try again.';
      }
    });
  </script>

</body>
</html>
