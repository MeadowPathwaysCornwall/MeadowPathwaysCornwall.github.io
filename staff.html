<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Staff â€” Protected</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <div class="site-wrapper">
    <aside class="sidebar"><div class="sidebar-top"><img src="Logo.png" alt="logo" class="logo-small"><h1 class="brand">Meadow Pathways</h1></div>
      <nav class="side-nav"><ul><li><a href="index.html">Home</a></li><li><a href="staff.html" class="active">Staff</a></li></ul></nav>
    </aside>

    <main id="main" class="main-content" role="main">
      <section class="container">
        <h1>Staff (protected)</h1>
        <div id="locked" style="padding:18px;background:#fff;border-radius:10px;">
          <p>This page is for Meadow Pathways staff. Enter the access password to view protected resources.</p>
          <label for="staffPassword">Password</label>
          <input id="staffPassword" type="password" class="form-control" aria-label="Staff password">
          <button id="unlockBtn" class="btn btn-primary" style="margin-top:12px;">Unlock</button>
        </div>

        <div id="staffPanel" style="display:none;margin-top:18px;">
          <section class="card" style="padding:16px;background:#fff;">
            <h2>Internal resources</h2>
            <ul>
              <li><a href="MPWEC Safeguarding and Child Protection Policy Sep 2025.docx" download>Safeguarding & Child Protection Policy</a></li>
              <li><a href="MPWEC H&S Policy Sep 25.docx" download>H&S Policy</a></li>
              <li><a href="MPWEC Lone Working Policy Sep25.docx" download>Lone Working Policy</a></li>
            </ul>

            <h3>Hours logged</h3>
            <form name="hours" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/thankyou.html">
              <input type="hidden" name="form-name" value="hours"><input type="hidden" name="bot-field">
              <label for="staff-name">Staff member</label><input id="staff-name" name="staff_name" required>
              <label for="date-worked">Date</label><input id="date-worked" name="date_worked" type="date" required>
              <label for="duration">Duration (hours)</label><input id="duration" name="duration_hours" type="number" step="0.25" min="0" required>
              <label for="client">Client / session with</label><input id="client" name="client_name">
              <label for="notes">Brief notes</label><textarea id="notes" name="notes" rows="4"></textarea>
              <label for="email-staff">Staff email</label><input id="email-staff" name="staff_email" type="email" value="Michelle.Pascoe@meadowpathwayscornwall.com" required>
              <div style="margin-top:12px;"><button type="submit" class="btn btn-success">Submit hours</button><div id="hoursStatus" role="status" aria-live="polite" style="margin-top:12px;"></div></div>
            </form>
          </section>
        </div>
      </section>
    </main>
  </div>

  <script src="jquery.min.js"></script>
  <script src="script.js"></script>

  <script>
    // client-side password unlock
    (function () {
      const PASSWORD = 'MPWEC!';
      const pwdInput = document.getElementById('staffPassword');
      const unlockBtn = document.getElementById('unlockBtn');
      if (unlockBtn) {
        unlockBtn.addEventListener('click', () => {
          if ((pwdInput.value || '').trim() === PASSWORD) {
            document.getElementById('locked').style.display = 'none';
            document.getElementById('staffPanel').style.display = 'block';
            pwdInput.value = '';
            document.getElementById('staff-name').focus();
          } else {
            alert('Incorrect password. If you need access, please contact Michelle or Zoe.');
            pwdInput.value = '';
            pwdInput.focus();
          }
        });
        pwdInput.addEventListener('keyup', function(e){ if(e.key === 'Enter') unlockBtn.click(); });
      }
    })();
  </script>
</body>
</html>
