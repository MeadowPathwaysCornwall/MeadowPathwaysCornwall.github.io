<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Staff — Meadow Pathways Wellbeing and Education Cornwall</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Blugoon theme overrides and additional styling */
    body { font-family: 'Inter', sans-serif; background: #f8f9fa; color: #333; margin:0; }
    header { background: #2f5b8b; color: white; padding: 1rem; display:flex; align-items:center; justify-content:space-between; }
    header h1 { margin:0; font-size:1.5rem; }
    nav ul { display:flex; list-style:none; padding:0; margin:0; gap:1rem; }
    nav a { color:white; text-decoration:none; padding:.5rem 1rem; border-radius:8px; }
    nav a.active, nav a:hover { background: #4a7ab8; }
    main { max-width: 1100px; margin:2rem auto; padding:0 1rem; }
    .card { background:white; padding:2rem; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.05); margin-bottom:2rem; }
    h2, h3, h4 { margin-top:1rem; margin-bottom:.5rem; }
    .pill { display:inline-block; background:#4a7ab8; color:white; padding:.5rem 1rem; border-radius:50px; text-decoration:none; margin:4px 4px 4px 0; font-size:.9rem; }
    .pill:hover { background:#2f5b8b; }
    label { display:block; margin-top:1rem; font-weight:600; }
    input, textarea, select, button { width:100%; padding:.7rem; margin-top:.3rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; }
    button { background:#4a7ab8; color:white; border:none; cursor:pointer; font-weight:600; transition:background .2s; }
    button:hover { background:#2f5b8b; }
    iframe { width:100%; border:none; border-radius:12px; margin-top:1rem; }
    #locked { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:60vh; background:#e1e8f0; border-radius:12px; padding:2rem; text-align:center; }
    #staffPanel { display:none; }
  </style>
</head>
<body>

<header>
  <h1>Meadow Pathways Staff</h1>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="eotas.html">EOTAS</a></li>
      <li><a href="safeguarding.html">Safeguarding</a></li>
      <li><a href="staff.html" class="active">Staff</a></li>
      <li><a href="referral.html">Referral</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
</header>

<main>
  <!-- Password Protection -->
  <div id="locked">
    <h2>Staff Access Only</h2>
    <p>MPWEC!</p>
    <input type="password" id="staffPassword" placeholder="Enter password">
    <button id="unlockBtn">Unlock</button>
  </div>

  <div id="staffPanel" aria-hidden="true">
    <section class="card">
      <h2>Welcome to the Staff Page</h2>
      <p>Internal links and resources for Meadow Pathways staff only. Please do not share externally.</p>

      <h3>Contact Emails</h3>
      <ul>
        <li>General: <a href="mailto:meadowpathwayscornwall@outlook.com">meadowpathwayscornwall@outlook.com</a></li>
        <li>Michelle: <a href="mailto:Michelle.Pascoe@meadowpathwayscornwall.com">Michelle.Pascoe@meadowpathwayscornwall.com</a></li>
        <li>Zoe: <a href="mailto:Zoe.Waitz@meadowpathwayscornwall.com">Zoe.Waitz@meadowpathwayscornwall.com</a></li>
      </ul>

      <h3>Statutory & Partner Resources</h3>
      <div>
        <a class="pill" href="https://assets.publishing.service.gov.uk/media/68add931969253904d155860/Keeping_children_safe_in_education_from_1_September_2025.pdf" target="_blank">Keeping children safe in education (Sep 2025)</a>
        <a class="pill" href="https://www.patreon.com/cw/pookyh/home" target="_blank">PookyH resources</a>
        <a class="pill" href="https://beaconhouse.org.uk/resources/" target="_blank">Beacon House resources</a>
        <a class="pill" href="https://learning.nspcc.org.uk/research-resources/resources" target="_blank">NSPCC learning & research</a>
        <a class="pill" href="https://ciossafeguarding.org.uk/scp" target="_blank">Cios safeguarding partnership</a>
      </div>

      <h3 style="margin-top:12px;">Internal Policies (Downloads)</h3>
      <div>
        <a class="pill" href="MPWEC Curriculum Policy EOTAS September 2025.docx" download>Curriculum Policy</a>
        <a class="pill" href="MPWEC H&S Policy Sep 25.docx" download>H&S Policy</a>
        <a class="pill" href="MPWEC Lone Working Policy Sep25.docx" download>Lone Working Policy</a>
        <a class="pill" href="MPWEC Safeguarding and Child Protection Policy Sep 2025.docx" download>Safeguarding Policy</a>
        <a class="pill" href="MPWEC Staff Conduct Policy.docx" download>Staff Conduct Policy</a>
        <a class="pill" href="MPWEC Whistleblowing Policy.docx" download>Whistleblowing Policy</a>
      </div>

      <h3 style="margin-top:12px;">SharePoint Access</h3>
      <a class="pill" href="https://meadowpathwayscornwall.sharepoint.com/:u:/s/meadowpathways/IQAQhQyq-4EBS7K7Y-Fwsk3HAQJUqP7ZOgT9Wuy9FFBZyYM?e=MHpq5i" target="_blank">Staff SharePoint</a>

      <!-- Calendar Embed -->
      <h3 style="margin-top:12px;">Staff Calendar</h3>
      <iframe src="https://outlook.office.com/owa/calendar/meadowpathwayscornwall@outlook.com/calendar.html" height="600"></iframe>

      <!-- Hours & Expenses Forms -->
      <section class="card">
        <h3>Hours Logged</h3>
        <form id="hoursForm" name="hoursForm" method="POST" data-netlify="true">
          <input type="hidden" name="form-name" value="hoursForm">
          <label for="staff-name">Staff member name</label>
          <input id="staff-name" name="staff_name" type="text" required>
          <label for="date-worked">Date</label>
          <input id="date-worked" name="date_worked" type="date" required>
          <label for="duration">Duration (hours)</label>
          <input id="duration" name="duration_hours" type="number" step="0.25" min="0" required>
          <label for="client">Client / session with</label>
          <input id="client" name="client_name" type="text">
          <label for="notes">Brief notes</label>
          <textarea id="notes" name="notes" rows="4"></textarea>
          <label for="email-staff">Staff email</label>
          <input id="email-staff" name="staff_email" type="email" value="meadowpathwayscornwall@outlook.com" required>
          <button type="submit">Submit Hours & Download PDF</button>
        </form>

        <h3 style="margin-top:24px;">Expenses Logged</h3>
        <form id="expensesForm" name="expensesForm" method="POST" data-netlify="true">
          <input type="hidden" name="form-name" value="expensesForm">
          <label for="expense-staff-name">Staff member name</label>
          <input id="expense-staff-name" name="staff_name" type="text" required>
          <label for="expense-date">Date</label>
          <input id="expense-date" name="expense_date" type="date" required>
          <label for="expense-type">Expense Type</label>
          <input id="expense-type" name="expense_type" type="text" placeholder="Travel, Materials, etc." required>
          <label for="amount">Amount (£)</label>
          <input id="amount" name="amount" type="number" step="0.01" min="0" required>
          <label for="receipt">Receipt / Notes</label>
          <textarea id="receipt" name="receipt_notes" rows="4" placeholder="Add details or attach receipt link"></textarea>
          <button type="submit">Submit Expense & Download PDF</button>
        </form>

        <p style="margin-top:12px; color:var(--text-soft)">
          Remember to log hours and expenses promptly. Ensure all client notes comply with Meadow Pathways record-keeping guidance.
        </p>
      </section>
    </section>
  </div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const PASSWORD = 'MPWEC!';
  const lockedEl = document.getElementById('locked');
  const staffPanel = document.getElementById('staffPanel');
  const unlockBtn = document.getElementById('unlockBtn');
  const pwdInput = document.getElementById('staffPassword');

  function unlock() {
    const val = (pwdInput.value || '').trim();
    if (val === PASSWORD) {
      lockedEl.style.display = 'none';
      staffPanel.style.display = 'block';
      lockedEl.setAttribute('aria-hidden', 'true');
      staffPanel.setAttribute('aria-hidden', 'false');
      document.getElementById('staff-name').focus();
    } else {
      pwdInput.value = '';
      pwdInput.focus();
      alert('Incorrect password. Contact Michelle or Zoe for access.');
    }
  }

  unlockBtn.addEventListener('click', unlock);
  pwdInput.addEventListener('keyup', e => { if(e.key === 'Enter') unlock(); });

  // PDF Generation for Hours Form
  const { jsPDF } = window.jspdf;
  function generatePDF(form, type) {
    const pdf = new jsPDF();
    const date = new Date().toLocaleDateString();
    pdf.setFontSize(16);
    pdf.text(`${type} Log - Meadow Pathways`, 10, 20);
    pdf.setFontSize(12);
    const formData = new FormData(form);
    let y = 40;
    for (const [key, value] of formData.entries()) {
      pdf.text(`${key.replace('_',' ')}: ${value}`, 10, y);
      y += 8;
    }
    pdf.text(`Submitted: ${date}`, 10, y+8);
    pdf.save(`${type}_${formData.get('staff_name') || 'Staff'}_${date}.pdf`);
  }

  document.getElementById('hoursForm').addEventListener('submit', e => {
    e.preventDefault();
    generatePDF(e.target, 'Hours');
    e.target.reset();
  });

  document.getElementById('expensesForm').addEventListener('submit', e => {
    e.preventDefault();
    generatePDF(e.target, 'Expenses');
    e.target.reset();
  });
</script>

</body>
</html>
