<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Staff — Meadow Pathways Wellbeing and Education Cornwall</title>
  <meta name="robots" content="noindex" />

  <!-- Bootstrap & Theme CSS (root paths, as-is) -->
  <link rel="stylesheet" href="bootstrap.min.css">
  <link rel="stylesheet" href="style.css">

  <style>
    .lock-wrap { display:flex; align-items:center; justify-content:center; padding:28px 12px; }
    .lock-card { max-width:760px; background:#fff; border-radius:12px; padding:22px; box-shadow:0 8px 28px rgba(0,0,0,0.08); text-align:center }
    .lock-card input[type="password"]{ width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid rgba(0,0,0,0.1) }
    .lock-card button{ margin-top:12px; padding:10px 14px; border-radius:8px; background:#198754; color:#fff; border:none; font-weight:700; cursor:pointer }
    .hint { color:#667788; font-size:0.95rem }
    .pill-bar .btn{ margin:4px }
  </style>
</head>
<body>

<!-- Header -->
<header class="site-header">
  <div class="header-inner container d-flex justify-content-between align-items-center">
    <a href="index.html" class="brand" aria-label="Meadow Pathways home">
      <img src="Logo.png" alt="Meadow Pathways Logo" class="logo-img" style="height:70px;">
    </a>
    <nav aria-label="Primary navigation">
      <ul class="nav nav-tabs">
        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
        <li class="nav-item"><a href="eotas.html" class="nav-link">EOTAS</a></li>
        <li class="nav-item"><a href="safeguarding.html" class="nav-link">Safeguarding</a></li>
        <li class="nav-item"><a href="staff.html" class="nav-link active">Staff</a></li>
        <li class="nav-item"><a href="referral.html" class="nav-link">Referral</a></li>
        <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Hero -->
<section class="hero text-center text-white" style="background:url('BG.png') no-repeat center/cover; padding:100px 20px; position:relative;">
  <div style="background:rgba(22,54,50,0.6); position:absolute; inset:0;"></div>
  <div class="container position-relative">
    <h1>Staff area</h1>
    <p class="lead">Internal links and information for Meadow Pathways staff</p>
  </div>
</section>

<main class="container my-5">

  <!-- Lock screen -->
  <div id="locked" class="lock-wrap" aria-hidden="false">
    <div class="lock-card" role="dialog" aria-labelledby="lock-title">
      <h2 id="lock-title" class="h4 mb-2">Staff access required</h2>
      <p>Enter the staff password to access hours logging, internal policies and safeguarding resources.</p>
      <input id="staffPassword" type="password" aria-label="Staff password" placeholder="Enter staff password">
      <button id="unlockBtn" type="button">Unlock</button>
      <p class="hint mt-2">If you have trouble accessing this area, contact Michelle or Zoe.</p>
      <div id="loginMessage" class="text-danger mt-2" aria-live="polite"></div>
    </div>
  </div>

  <!-- Staff panel -->
  <div id="staffPanel" style="display:none" aria-hidden="true">

    <!-- Internal information -->
    <section class="card p-4 shadow-sm mb-4">
      <h2>Internal information</h2>
      <p>This page contains protected resources and notes for staff use only. Please do not share externally.</p>

      <div class="pill-bar mb-3">
        <a class="btn btn-outline-success" href="protected-resources.html">Protected resources</a>
        <a class="btn btn-outline-success" href="passwords.html">Passwords notice</a>
        <a class="btn btn-outline-success" href="staff-rota.html">Staff log hours</a>
        <a class="btn btn-outline-success" href="policies.html">Policies index</a>
      </div>

      <ul class="mb-0">
        <li>Formspree endpoint for all forms: <code>https://formspree.io/f/movnvzqp</code></li>
        <li>General contact email: <a href="mailto:meadowpathwayscornwall@outlook.com">meadowpathwayscornwall@outlook.com</a></li>
        <li>Michelle’s email: <a href="mailto:Michelle.Pascoe@meadowpathwayscornwall.com">Michelle.Pascoe@meadowpathwayscornwall.com</a></li>
        <li>Zoe’s email: <a href="mailto:Zoe.Waitz@meadowpathwayscornwall.com">Zoe.Waitz@meadowpathwayscornwall.com</a></li>
        <li>Michelle’s phone: 07932243358</li>
        <li>Zoe’s phone: 07775733587</li>
      </ul>
    </section>

    <!-- Statutory and partner resources -->
    <section class="card p-4 shadow-sm mb-4">
      <h2>Statutory and partner resources</h2>
      <div class="pill-bar">
        <a class="btn btn-outline-success" href="https://assets.publishing.service.gov.uk/media/68add931969253904d155860/Keeping_children_safe_in_education_from_1_September_2025.pdf" target="_blank" rel="noopener">KCSIE (Sep 2025) — GOV.UK</a>
        <a class="btn btn-outline-success" href="https://beaconhouse.org.uk/resources/" target="_blank" rel="noopener">Beacon House resources</a>
        <a class="btn btn-outline-success" href="https://learning.nspcc.org.uk/research-resources/resources" target="_blank" rel="noopener">NSPCC learning &amp; research</a>
        <a class="btn btn-outline-success" href="https://ciossafeguarding.org.uk/scp" target="_blank" rel="noopener">Cios safeguarding partnership</a>
        <a class="btn btn-outline-success" href="https://www.patreon.com/cw/pookyh/home" target="_blank" rel="noopener">PookyH resources</a>
      </div>
    </section>

    <!-- Internal policy documents -->
    <section class="card p-4 shadow-sm mb-4">
      <h2>Internal policy documents (downloads)</h2>
      <div class="pill-bar">
        <a class="btn btn-outline-success" href="MPWEC Curriculum Policy EOTAS September 2025.docx" download>Curriculum Policy (EOTAS)</a>
        <a class="btn btn-outline-success" href="MPWEC H&S Policy Sep 25.docx" download>Health &amp; Safety Policy</a>
        <a class="btn btn-outline-success" href="MPWEC Lone Working Policy Sep25.docx" download>Lone Working Policy</a>
        <a class="btn btn-outline-success" href="MPWEC Safeguarding and Child Protection Policy Sep 2025.docx" download>Safeguarding &amp; Child Protection Policy</a>
        <a class="btn btn-outline-success" href="MPWEC Staff Conduct Policy.docx" download>Staff Conduct Policy</a>
        <a class="btn btn-outline-success" href="MPWEC Whistleblowing Policy.docx" download>Whistleblowing Policy</a>
        <a class="btn btn-outline-success" href="RSHE 2025.pdf" download>RSHE (2025)</a>
        <a class="btn btn-outline-success" href="EBSNA.docx" download>EBSNA Guidance</a>
      </div>
    </section>

    <!-- Hours logged form -->
    <section class="card p-4 shadow-sm mb-4">
      <h2>Hours logged</h2>
      <form id="hoursForm" method="POST" novalidate>
        <input type="hidden" name="_subject" value="Hours logged - Meadow Pathways Staff" />
        <div class="mb-2">
          <label for="staff-name" class="form-label">Staff member name</label>
          <input id="staff-name" name="staff_name" type="text" class="form-control" required />
        </div>
        <div class="mb-2">
          <label for="date-worked" class="form-label">Date</label>
          <input id="date-worked" name="date_worked" type="date" class="form-control" required />
        </div>
        <div class="mb-2">
          <label for="duration" class="form-label">Duration (hours)</label>
          <input id="duration" name="duration_hours" type="number" step="0.25" min="0" class="form-control" required />
        </div>
        <div class="mb-2">
          <label for="client" class="form-label">Client / session with</label>
          <input id="client" name="client_name" type="text" class="form-control" />
        </div>
        <div class="mb-2">
          <label for="notes" class="form-label">Brief notes</label>
          <textarea id="notes" name="notes" rows="4" class="form-control"></textarea>
        </div>
        <div class="mb-3">
          <label for="email-staff" class="form-label">Staff email</label>
          <input id="email-staff" name="staff_email" type="email" class="form-control" value="Michelle.Pascoe@meadowpathwayscornwall.com" required />
        </div>
        <button type="submit" class="btn btn-success">Submit hours</button>
        <div id="hoursStatus" role="status" aria-live="polite" class="mt-2 text-muted fw-bold"></div>
      </form>
      <p class="hint mt-2">Log hours promptly and ensure notes comply with Meadow Pathways record‑keeping guidance.</p>
    </section>

  </div>
</main>

<!-- Footer -->
<footer class="site-footer text-center text-white py-4" style="background:#163632;">
  <img src="Logo.png" alt="Meadow Pathways Logo" class="footer-logo mb-2" style="height:60px;">
  <p>© 2025 Meadow Pathways Wellbeing and Education Cornwall Ltd</p>
  <p>Guiding Individual Journeys with Care and Purpose</p>
</footer>

<!-- Page-specific JS (unlock + hours submit) -->
<script>
(function () {
  const PASSWORD = 'MPWEC!';
  const lockedEl = document.getElementById('locked');
  const staffPanel = document.getElementById('staffPanel');
  const unlockBtn = document.getElementById('unlockBtn');
  const pwdInput = document.getElementById('staffPassword');
  const loginMessage = document.getElementById('loginMessage');

  function unlock() {
    const val = (pwdInput.value || '').trim();
    if (val === PASSWORD) {
      lockedEl.style.display = 'none';
      staffPanel.style.display = 'block';
      lockedEl.setAttribute('aria-hidden', 'true');
      staffPanel.setAttribute('aria-hidden', 'false');
      document.getElementById('staff-name').focus();
      if (loginMessage) loginMessage.textContent = '';
    } else {
      pwdInput.value = '';
      pwdInput.focus();
      if (loginMessage) loginMessage.textContent = 'Incorrect password. Please try again or contact the team.';
    }
  }

  unlockBtn.addEventListener('click', unlock);
  pwdInput.addEventListener('keyup', function (e) { if (e.key === 'Enter') unlock(); });

  // Hours form submit
  const hoursForm = document.getElementById('hoursForm');
  const hoursStatus = document.getElementById('hoursStatus');
  const FORMSPREE = 'https://formspree.io/f/movnvzqp';

  hoursForm.addEventListener('submit', async function (e) {
    e.preventDefault();
    hoursStatus.textContent = 'Submitting...';
    const data = new FormData(hoursForm);
    try {
      const res = await fetch(FORMSPREE, {
        method: 'POST',
        headers: { 'Accept': 'application/json' },
        body: data
      });
      if (res.ok) {
        hoursForm.reset();
        hoursStatus.textContent = 'Hours submitted. Thank you.';
        setTimeout(() => { window.location.href = 'thankyou.html'; }, 900);
      } else {
        const result = await res.json().catch(() => null);
        hoursStatus.textContent = (result && result.errors)
          ? result.errors.map(err => err.message).join('; ')
          : 'Submission error — please try again later.';
      }
    } catch (err) {
      hoursStatus.textContent = 'Network error — check connection and try again.';
    }
  });
})();
</script>

<!-- Global scripts (root paths, matching your repo) -->
<script src="bootstrap.bundle.min.js"></script>
<script src="script.js" defer></script>
</body>
</html>
